@using SWP_CarService_Final.Models
@{
    ViewData["Title"] = "view";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    @model List<PartDetail>

}

<div class="main-container content">
    <div class="modal fade" id="exampleModal"
         tabindex="-1"
         aria-labelledby="exampleModalLabel"
         aria-hidden="true">

        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"
                        id="exampleModalLabel">
                        Confirmation
                    </h5>

                    <button type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-label="Close">
                        <span aria-hidden="true">
                            ×
                        </span>
                    </button>
                </div>

                <div class="modal-body">

                    <!-- Data passed is displayed
                        in this part of the
                        modal body -->
                    <form action="/user/PartDetail/EditRequest" method="post">
                        <div class="form-group">
                            <input name="partDetailId" type="text" id="IdInput" hidden />
                        </div>

                        <div class="form-group">
                            <label for="quantity">Input Quantity</label>
                            <input name="quantity" type="number" id="quantity" />
                        </div>


                        <div class="form-group">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            <input type="submit" value="Submit" />
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>

    <div class="table-Request_Complete_Task ml-2 mr-2">
        <table class="" style="width: 100%;">
            <thead>
                <tr>
                    <th style="width: 10%;">ID</th>
                    <th style="width: 15%;">Part</th>
                    <th style="width: 10%;">Quantity</th>
                    <th style="width: 15%;">Price</th>
                    <th style="width: 15%;">Status</th>
                    <th style="width: 20%;">Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var part in Model)
                {
                    <tr>
                        <td>@part.ItemDetailId</td>
                        <td>@part.part.part_name</td>
                        <td>@part.quantity</td>
                        <td>@string.Format("{0:C0}", @part.price).Substring(1)</td>
                        <td>
                            <div style="width: 70%; margin: 0 auto" class="active-status">
                                @part.status
                            </div>
                        </td>
                        <td style="display: flex; justify-content: space-evenly; align-items: center; height: 90px">
                            <button style="width: 30%; padding: 7px;" onclick="requestItem('@part.ItemDetailId.Trim()', '@part.quantity')" type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#exampleModal" id="submit">
                                Edit
                            </button>
                            <a class="mr-2" href="/user/PartDetail/delete?partDetailId=@part.ItemDetailId"><button style="width: 100%" type="button" class="btn btn-primary btn-complete">Delete</button></a>
                        </td>
                    </tr>
                }
            </tbody>
    </div>
</div>
<script>
    @section Javascript{
        function requestItem(partID, quantity) {
            document.getElementById("IdInput").value = partID;
            document.getElementById("quantity").value = quantity;

        };
    }
</script>

