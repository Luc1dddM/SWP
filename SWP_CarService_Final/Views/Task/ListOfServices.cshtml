@using SWP_CarService_Final.Services;

@{
    ViewData["Title"] = "ListOfServices";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    TaskService taskService = new TaskService();
}

 <div class="main-container content">
        <div class="content-search">
            <div>
                <h3>Services</h3>
            </div>
            <div class="search-container">
                <form action="">
                    <input type="text" placeholder="Search.." name="search">
                    <button type="submit"><i class="fa fa-search"></i></button>
                </form>
            </div>
            <div class="add-service-button">
            <a href="AddService">Add Services</a>
            </div>
        </div>
        <div class="table-services">
            <table style="width: 100%;">
                <tr>
                    <th style="width: 5%;">ID</th>
                    <th style="width: 15%;">Image</th>
                    <th style="width: 15%;">Name Services</th>
                    <th style="width: 10%;">Price</th>
                    <th style="width: 30%;">Description</th>
                    <th style="width: 10%;">Status</th>
                    <th>Action</th>
                </tr>
            @foreach (var task in @taskService.getAllTasks()){
                <tr>
                    <td>@task.taskID</td>
                    <td><img style="width:50px; height:50px" src="~/img/@task.img" alt="Engine Repair"></td>
                    <td>@task.taskName</td>
                    <td>@task.price</td>
                    <td>@task.Description
                    </td>
                    <td>
                        @if (task.active)
                        {
                            <div class="active-status">
                                Active
                            </div>
                        }
                        else{
                            <div class="inactive-status">
                                In-Active
                            </div>
                        }
                    </td>
                    <td>
                        <div class="action-button">
                            <div class="edit-button">
                                <a href="Edit?task_id=@task.taskID">Edit</a>
                            </div>
                            <div class="delete-button" onclick="cfDelete('@task.taskID')"><button>Delete</button>
                            </div>
                        </div>
                    </td>
                </tr>
                }
    </table>
    </div>
    <div class="delete-message" style="display: none;">
        <span class="close-icon">&times;</span>
        <p>Do you want to delete this service?</p>
        <div class="btn-container">
            <button class="confirm-button">Yes</button>
            <button class="cancel-button">No</button>
        </div>
    </div>

    <script type="text/javascript">
        function cfDelete(key) {
            if (confirm("Do you want to delete this service?")) {
                window.location = "/task/ListOfService?task_id=" + key;
            }
        }
    </script>

